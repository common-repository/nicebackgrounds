jQuery(document).ready(function(a){"use strict";var b=a("#nicebackgrounds-wrap"),c=function(b){var c=a(".nicebackgrounds-status");if((null!==c.data("timeout")||void 0!==c.data("timeout"))&&(c.removeData("timeout"),clearTimeout(c.data("timeout"))),"wait"===b)c.find(".nicebackgrounds-failure").hide(30),c.find(".nicebackgrounds-success").hide(30),c.find(".nicebackgrounds-wait").show(30),c.show(150);else if("success"===b){c.find(".nicebackgrounds-wait").hide(30),c.find(".nicebackgrounds-failure").hide(30),c.find(".nicebackgrounds-success").show(30),c.show(150);var d=setTimeout(function(){a(".nicebackgrounds-status").hide(300)},5e3);c.data("timeout",d)}else"failure"===b&&(c.find(".nicebackgrounds-wait").hide(30),c.find(".nicebackgrounds-success").hide(30),c.find(".nicebackgrounds-failure").show(30),c.show(150))};a.fn.setCursorToTextEnd=function(){var a=this.val();this.val(a)};var d=function(b){var c=b.closest("form > div"),d=[],e=[];b.find("[data-show]").each(function(){if(a(this).is(":checked, :selected"))e.push(a(this).data("show"));else for(var b=a(this).data("show").split(","),c=0;c<b.length;c++)d.push(b[c])}),e=e.join(","),d.length&&(d=e.length?d.join(":not("+e+"),")+":not("+e+")":d.join(","),c.find(d).hide(100)),c.find(e).show(100)},e=".nicebackgrounds-form-row:not(.nicebackgrounds-form-row .nicebackgrounds-form-row):has([data-show])";a(e).each(function(){d(a(this))}),b.on("change",e,function(){d(a(this))}),a("#nicebackgrounds-new-set-container").submit(function(b){b.preventDefault(),c("wait");var d={action:"nicebackgrounds",func:"new_set",nonce:a(this).data("new-set"),nonce_key:"new_set",value:a(this).find("input").val()};a.post(nicebackgrounds_data.ajax_url,d,function(a){null!==a&&a.success&&a.result?(c("success"),location.reload()):c("failure")},"json").fail(function(){c("failure")})}),a("#nicebackgrounds-new-set").click(function(b){b.preventDefault(),a(this).siblings(".nicebackgrounds-input-new-set-form").fadeToggle(150).find("input").focus()}).find("button").click(function(b){b.preventDefault(),a(this).closest("#nicebackgrounds-new-set-container").submit()});var f=function(b,d,e){c("wait");var f=b.closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div"),g=f.data("tab-key"),h={action:"nicebackgrounds",func:"set_action",set_id:g,nonce:b.closest(".nicebackgrounds-set-actions").data("set-action"),value:e,set_action:d};a.post(nicebackgrounds_data.ajax_url,h,function(a){null!==a&&a.success&&a.result?(c("success"),location.reload()):c("failure")},"json").fail(function(){c("failure")})};a(".nicebackgrounds-action-link a").click(function(b){b.preventDefault();var c=a(this).siblings(".nicebackgrounds-form-row");a(this).closest(".nicebackgrounds-set-actions").find(".nicebackgrounds-form-row").not(c).fadeOut(),c.fadeToggle(150).find("input").focus().setCursorToTextEnd()}),a(".nicebackgrounds-set-clear").click(function(b){b.preventDefault(),f(a(this),"clear",null)}),a(".nicebackgrounds-action-link-rename button").click(function(b){b.preventDefault();var c=a(this).parent().find("input").val();f(a(this),"rename",c)}),a(".nicebackgrounds-action-link-clone button").click(function(b){b.preventDefault();var c=a(this).parent().find("input").val();f(a(this),"clone",c)}),a(".nicebackgrounds-action-link-delete button").click(function(b){b.preventDefault(),f(a(this),"delete",null)});var g=function(b,d){if(!b.is(".picklist-freetext")&&null!==b.data("unsaved")){if(d>=5)return c("failure"),void b.data("cantsave","cantsave");c("wait");var e=b.closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div"),f=b.val();b.is("input[type=checkbox]")&&(f=b.is(":checked")?1:0);var h=b.attr("name"),i={action:"nicebackgrounds",func:"save_set",set_id:e.data("tab-key"),nonce:e.find(".nicebackgrounds-set-form").data("save-set"),key:h,value:f};a.post(nicebackgrounds_data.ajax_url,i,function(e){if(null!==e&&e.success){b.removeData("unsaved");var f=a(".nicebackgrounds-set-settings input[data-cantsave], .nicebackgrounds-set-settings select[data-cantsave]");f.length?g(f.removeData("cantsave").first()):c("success")}else setTimeout(function(){g(b,d+1)},1e3)},"json").fail(function(){setTimeout(function(){g(b,d+1)},1e3)})}},h=a(".nicebackgrounds-set-settings input, .nicebackgrounds-set-settings select, .nicebackgrounds-css-settings input");h.change(function(){a(this).data("unsaved","unsaved"),g(a(this),0)});var i=function(){var b=a(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div:not(.nicebackgrounds-processed)");if(b.length){var c={action:"nicebackgrounds",func:"generate_set",set_id:b.data("tab-key"),nonce:b.find(".nicebackgrounds-set-form").data("generate-set")};a.post(nicebackgrounds_data.ajax_url,c,function(a){null!==a&&a.success&&a.result&&b.addClass("nicebackgrounds-processed"),setTimeout(function(){i()},2e3)},"json")}};i(),b.on("click",".nicebackgrounds-thumb > .nicebackgrounds-modal",function(b){b.preventDefault(),b.stopImmediatePropagation();var c=a(this);c.addClass("nicebackgrounds-modal-waiting");var d=new Image;d.src=c.attr("href"),d.onload=function(){var b=a(d);a("body").append(b),b.attr("class","nicebackgrounds-fullscreen-image").css("display","none"),a("html").addClass("nicebackgrounds-with-fullscreen-image"),b.fadeIn(100),b.click(function(){b.fadeOut(100,function(){b.remove(),a("html").removeClass("nicebackgrounds-with-fullscreen-image"),c.removeClass("nicebackgrounds-modal-waiting")})})}}),b.on("click",".nicebackgrounds-collection-display .nicebackgrounds-thumb > .nicebackgrounds-remove",function(b){b.preventDefault(),b.stopImmediatePropagation(),c("wait");var d=a(this).closest(".nicebackgrounds-thumb"),e=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div");d.fadeTo(300,.25);var f={action:"nicebackgrounds",func:"remove_image",set_id:e.data("tab-key"),nonce:e.find(".nicebackgrounds-collection-display").data("remove-image"),file:d.find("img").attr("src")};a.post(nicebackgrounds_data.ajax_url,f,function(a){null!==a&&a.success?(c("success"),d.fadeTo(150,0,function(){d.remove(),e.find(".nicebackgrounds-reserves-choices").removeClass("nicebackgrounds-reserves-choices-done"),e.find(".nicebackgrounds-tab-group-collection-add > ul > li.nicebackgrounds-tab-collection-add-reserves").trigger("update")})):(c("failure"),d.fadeTo(300,100))},"json").fail(function(){c("failure"),d.fadeTo(300,100)})})}),function(a,b,c){a.nicebackgrounds_save_picklist_option=function(a,c,d){var e={action:"nicebackgrounds",func:"save_picklist_option",nonce:b("#nicebackgrounds-wrap").data("save-picklist-option"),nonce_key:"save_picklist_option",option:a.data("picklist-option"),value:c,remove:d};b.post(nicebackgrounds_data.ajax_url,e,function(a){},"json"),b(".nicebackgrounds-picklist").each(function(){if(b(this).data("picklist-option")==a.data("picklist-option")){var e=!1;if(b(this).find("span.picklist-option:contains("+c+"), span.picklist-picked-value:contains("+c+")").each(function(){if(c===b(this).text()){if(e=!0,!d)return!1;b(this).remove()}}),!e&&!d){var f=b('<span class="picklist-option">'+c+'<span class="dashicons dashicons-trash"></span>');b(this).find(".picklist-options").append(f)}}})}}(window.nicebackgrounds_callable=window.nicebackgrounds_callable||{},jQuery),jQuery(document).ready(function(a){"use strict";var b=a("#nicebackgrounds-wrap"),c=function(a){for(var b=a.closest(".nicebackgrounds-picklist"),c=a.text(),d=b.find("input.picklist-value"),e=d.val().trim().split(","),f=[],g=0;g<e.length;g++)e[g]!==c&&f.push(e[g]);d.val(f.join(",")).trigger("change");var h=a.clone().removeClass("picklist-picked-value").addClass("picklist-option");h.find("span.dashicons-no").removeClass("dashicons-no").addClass("dashicons-trash"),a.closest(".nicebackgrounds-picklist").find(".picklist-options").append(h),a.remove()},d=function(b){b.find(".picklist-picked-value").each(function(){c(a(this))})},e=function(a,b){var c=a.hasClass("nicebackgrounds-multiple");c||d(a);var e=a.find("input.picklist-value");""!==e.val()&&null!==e.val()&&c?e.val(e.val()+","+b).trigger("change"):e.val(b).trigger("change")},f=function(a,b,c){if(null!==a.data("option-save-callback")||void 0!==a.data("option-save-callback")){for(var d=a.data("option-save-callback").split("."),e=d.pop(),f=window,g=0;g<d.length;g++)f=f[d[g]];f[e].call(f,a,b,c)}},g=function(b){var c=b.val();if(""!==c.trim()){var g=b.closest(".nicebackgrounds-picklist"),h=g.hasClass("nicebackgrounds-multiple");h||d(g);for(var i=c.split(","),j=0;j<i.length;j++)if(""!==i[j].trim()){e(g,i[j].trim());var k=a('<span class="picklist-picked-value">'+i[j].trim()+'<span class="dashicons dashicons-no"></span>');g.find("input.picklist-freetext").before(k),f(g,i[j].trim(),0)}b.val("")}},h=function(a){var b=a.closest(".nicebackgrounds-picklist"),c=b.hasClass("nicebackgrounds-multiple");e(b,a.text());var f=a.clone().removeClass("picklist-option").addClass("picklist-picked-value");f.find("span.dashicons-trash").removeClass("dashicons-trash").addClass("dashicons-no"),c||d(b),b.find("input.picklist-freetext").before(f),a.remove()};b.on("mouseup",".nicebackgrounds-picklist .picklist-option > span.dashicons-trash",function(){if(a(this).hasClass("clicked"))a(this).removeClass("clicked").closest(".nicebackgrounds-picklist").find(".picklist-delete-hint").show(300).delay(1e4).hide(300);else{a(this).addClass("clicked");var b=a(this);setTimeout(function(){b.removeClass("clicked")},2e3)}}),b.on("mousedown",".nicebackgrounds-picklist .picklist-option > span.dashicons-trash",function(){a(this).addClass("nicebackgrounds-deleting").parent(".picklist-option").animate({opacity:.25},2e3,function(){a(this).find("span.dashicons-trash").hasClass("nicebackgrounds-deleting")&&(f(a(this).closest(".nicebackgrounds-picklist"),a(this).text().trim(),1),a(this).hide(100))})}),b.on("mouseup mouseleave click",".nicebackgrounds-picklist .picklist-option > span.dashicons-trash",function(b){b.stopImmediatePropagation(),a(this).removeClass("nicebackgrounds-deleting").parent(".picklist-option").stop(!0).animate({opacity:1},100)}),b.on("click",".nicebackgrounds-picklist .picklist-option",function(){h(a(this))}),b.on("click",".nicebackgrounds-picklist .picklist-picked-value .dashicons-no",function(){c(a(this).parent())}),b.on("blur",".nicebackgrounds-picklist .picklist-freetext",function(){g(a(this))}),b.on("keypress",".nicebackgrounds-picklist .picklist-freetext",function(b){return 13===b.which?(g(a(this)),!1):void 0}),b.on("click",".nicebackgrounds-picklist .picklist-picked-values",function(){a(this).find(".picklist-freetext").focus()}),b.on("focus",".nicebackgrounds-picklist .picklist-freetext",function(){a(this).parent().addClass("active")}),b.on("blur",".nicebackgrounds-picklist .picklist-freetext",function(){a(this).parent().removeClass("active")})}),jQuery(document).ready(function(a){"use strict";var b=a("#nicebackgrounds-wrap"),c=function(b){var c=b.find(".nicebackgrounds-reserves-container"),d=c.find(".nicebackgrounds-reserves-choices");if(!d.hasClass("nicebackgrounds-reserves-choices-done")){d.removeClass("nicebackgrounds-reserves-choices-failure");var e={action:"nicebackgrounds",func:"load_reserves",set_id:b.data("tab-key"),nonce:c.data("load-reserves")};a.post(nicebackgrounds_data.ajax_url,e,function(b){if(null!==b&&b.success){var c=a(b.result);d.html(c),d.addClass("nicebackgrounds-reserves-choices-done")}else d.addClass("nicebackgrounds-reserves-choices-failure")},"json").fail(function(){d.addClass("nicebackgrounds-reserves-choices-failure")})}};b.on("click update",".nicebackgrounds-tab-group-collection-add > ul > li",function(){if("nicebackgrounds-tab-panel-collection-add-reserves"===a(this).data("target")){var b=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div").first();c(b)}}),b.on("click",".nicebackgrounds-reserves-choices .nicebackgrounds-thumb > .nicebackgrounds-remove",function(b){b.preventDefault(),b.stopImmediatePropagation();var c=a(this).closest(".nicebackgrounds-thumb"),d=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div");c.fadeOut(300,function(){c.remove();var b={action:"nicebackgrounds",func:"remove_reserves",set_id:d.data("tab-key"),nonce:d.find(".nicebackgrounds-reserves-container").data("remove-reserves"),file:c.find("img").attr("src")};a.post(nicebackgrounds_data.ajax_url,b,function(a){},"json")})}),b.on("click",".nicebackgrounds-reserves-choices .nicebackgrounds-thumb",function(b){b.preventDefault(),b.stopImmediatePropagation();var c=a(this).closest(".nicebackgrounds-thumb");if(!c.hasClass("nicebackgrounds-choosing")){c.addClass("nicebackgrounds-choosing");var d=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div"),e={action:"nicebackgrounds",func:"save_reserves",set_id:d.data("tab-key"),nonce:d.find(".nicebackgrounds-reserves-container").data("save-reserves"),file:c.find("a.nicebackgrounds-modal").attr("href"),dimensions:c.find(".nicebackgrounds-dimensions").text()},f=a('<span class="nicebackgrounds-overlay nicebackgrounds-overlay-wait"><span class="dashicons dashicons-update"></span><span class="message"></span></span>');f.hide(0),c.append(f),f.fadeIn(150),a.post(nicebackgrounds_data.ajax_url,e,function(b){if(null!==b&&b.message&&f.find(".message").text(b.message),null!==b&&b.success){f.removeClass("nicebackgrounds-overlay-wait").addClass("nicebackgrounds-overlay-success"),f.find(".dashicons").removeClass("dashicons-update").addClass("dashicons-thumbs-up");var e=a(b.result);e.hide(0),d.find(".nicebackgrounds-collection-display").append(e),e.show(150),c.delay(2e3).fadeOut(300,function(){c.remove()})}else f.removeClass("nicebackgrounds-overlay-wait").addClass("nicebackgrounds-overlay-error"),f.find(".dashicons").removeClass("dashicons-update").addClass("dashicons-thumbs-down"),f.delay(5e3).fadeOut(300,function(){f.remove(),c.removeClass("nicebackgrounds-choosing")})},"json").fail(function(){f.removeClass("nicebackgrounds-overlay-wait").addClass("nicebackgrounds-overlay-failure"),f.find(".dashicons").removeClass("dashicons-update").addClass("dashicons-no"),f.delay(5e3).fadeOut(300,function(){f.remove(),c.removeClass("nicebackgrounds-choosing")})})}})}),jQuery(document).ready(function(a){"use strict";a(a(".nicebackgrounds-tab-group").get().reverse()).each(function(){var b=a(this).find("> ul > li.nicebackgrounds-tab-active");0===b.length&&(b=a(this).find("> ul > li:first-child"),b.addClass("nicebackgrounds-tab-active"));var c=b.closest(".nicebackgrounds-tabs");if(0===c.siblings(".nicebackgrounds-underline").length){var d=a('<div class="nicebackgrounds-underline"></div>'),e=b.offset(),f=c.offset();d.css("position","absolute").css("top",f.top-e.top).css("left",e.left-f.left).css("width",Math.max(b.width())).css("height",Math.max(b.height())),c.after(d)}a(this).find("> .nicebackgrounds-tab-panels > div:not(."+b.data("target")+")").hide(),a(this).find("> .nicebackgrounds-tab-panels > div."+b.data("target")).addClass("nicebackgrounds-tab-active")}),a(".nicebackgrounds-tab-group > ul > li").click(function(){var b=a(this).closest(".nicebackgrounds-tab-group");if(!b.hasClass("nicebackgrounds-animating")&&!a(this).hasClass("nicebackgrounds-tab-active")){b.addClass("nicebackgrounds-animating");var c=a(this),d=b.find("li.nicebackgrounds-tab-active").first(),e=a(this).offset(),f=a(this).closest(".nicebackgrounds-tabs"),g=f.offset(),h=f.siblings(".nicebackgrounds-underline");h.animate({top:e.top-g.top,left:e.left-g.left,width:Math.max(a(this).innerWidth())},300,function(){d.removeClass("nicebackgrounds-tab-active"),c.addClass("nicebackgrounds-tab-active")});var i="."+c.data("target"),j=b.find(" > .nicebackgrounds-tab-panels > div.nicebackgrounds-tab-active").first(),k=b.find(i).first(),l="-110%",m="110%";0!==k.nextAll("div.nicebackgrounds-tab-active").length&&(l="110%",m="-110%"),j.animate({"margin-left":l},150,function(){j.hide(0).css("margin-left",0),k.css("margin-left",m).show(0).animate({"margin-left":0},150,function(){j.removeClass("nicebackgrounds-tab-active"),k.addClass("nicebackgrounds-tab-active"),b.removeClass("nicebackgrounds-animating")})})}})}),jQuery(document).ready(function(a){"use strict";var b=a("#nicebackgrounds-wrap"),c=function(b,d){var e=b.find(".nicebackgrounds-unsplash-refresh");e.addClass("nicebackgrounds-active");var f=b.find(".nicebackgrounds-unsplash-choices"),g=f.width(),h=0;if(null===f.data("load-id")||void 0===f.data("load-id"))f.data("load-id",d);else if(f.data("load-id")!==d)return;if(f.find(".nicebackgrounds-thumb").each(function(){var b=a(this).outerWidth(!0),c=a(this).outerWidth(),d=b-c;h+=c+d/2}),g-h>0){var i={action:"nicebackgrounds",func:"load_unsplash",set_id:b.data("tab-key"),nonce:b.find(".nicebackgrounds-unsplash-container").data("load-unsplash"),search:b.find(".nicebackgrounds-unsplash-container-search :input").serialize()};a.post(nicebackgrounds_data.ajax_url,i,function(g){if(f.data("load-id")===d)if(null!==g&&g.success&&g.cdn){f.find(".nicebackgrounds-new").fadeIn(500).removeClass("nicebackgrounds-new"),f.find(".nicebackgrounds-faded").fadeTo(500,1).removeClass("nicebackgrounds-faded");var h=new Image;h.src=g.result;var i=a(g.thumb);i.find("img").remove(),i.addClass("nicebackgrounds-new").css("display","none").append(h),f.append(i),h.onload=function(){f.data("load-id")===d&&(i.find(".nicebackgrounds-dimensions").text(h.width+"x"+h.height),i.find(".nicebackgrounds-modal").attr("href",h.src),c(b,d))}}else if(null!==g&&g.success&&!g.cdn){var j=a(g.result);f.append(j),c(b,d)}else e.removeClass("nicebackgrounds-active").addClass("nicebackgrounds-error"),setTimeout(function(){e.removeClass("nicebackgrounds-error")},2e3),f.removeData("load-id")},"json")}else f.find(".nicebackgrounds-new").addClass("nicebackgrounds-faded").removeClass("nicebackgrounds-new").fadeTo(500,.25),e.removeClass("nicebackgrounds-active"),f.removeData("load-id")},d=function(a){if(!a.find(".nicebackgrounds-unsplash-refresh").hasClass("nicebackgrounds-active")){var b=a.find(".nicebackgrounds-unsplash-choices").data("load-id");(null===b||void 0===b)&&(b=Math.random()),setTimeout(function(){c(a,b)},1e3)}};b.on("click",".nicebackgrounds-tab-group-set > ul > li",function(){var b=a(".nicebackgrounds-tab-group-set ."+a(this).data("target")).first();d(b)}),b.on("click",".nicebackgrounds-tab-group-collection-add > ul > li",function(){if("nicebackgrounds-tab-panel-collection-add-unsplash"===a(this).data("target")){var b=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div").first();d(b)}}),setTimeout(function(){a(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div.nicebackgrounds-tab-active").each(function(){c(a(this),Math.random())})},2e3),a(".nicebackgrounds-unsplash-refresh").click(function(b){b.preventDefault(),b.stopImmediatePropagation();var d=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div");d.find(".nicebackgrounds-unsplash-choices").removeData("load-id").find(".nicebackgrounds-thumb").remove(),c(d,Math.random())});var e=function(a,b){var d=a.closest(".nicebackgrounds-unsplash-choices").data("load-id");(null===d||void 0===d)&&(d=Math.random()),b.find(".nicebackgrounds-unsplash-refresh").hasClass("nicebackgrounds-active")||c(b,d)};b.on("click",".nicebackgrounds-unsplash-choices .nicebackgrounds-thumb > .nicebackgrounds-remove",function(b){b.preventDefault(),b.stopImmediatePropagation();var c=a(this).closest(".nicebackgrounds-thumb"),d=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div");c.fadeOut(300,function(){if(c.remove(),e(c,d),!c.hasClass("nicebackgrounds-thumb-cdn")){var b={action:"nicebackgrounds",func:"remove_unsplash",set_id:d.data("tab-key"),nonce:d.find(".nicebackgrounds-unsplash-container").data("remove-unsplash"),file:c.find("img").attr("src")};a.post(nicebackgrounds_data.ajax_url,b,function(a){},"json")}})}),b.on("click",".nicebackgrounds-unsplash-choices .nicebackgrounds-thumb",function(b){b.preventDefault(),b.stopImmediatePropagation();var c=a(this).closest(".nicebackgrounds-thumb");if(!c.hasClass("nicebackgrounds-choosing")){c.addClass("nicebackgrounds-choosing");var d=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div"),f={action:"nicebackgrounds",func:"save_unsplash",set_id:d.data("tab-key"),nonce:d.find(".nicebackgrounds-unsplash-container").data("save-unsplash"),file:c.find("a.nicebackgrounds-modal").attr("href"),dimensions:c.find(".nicebackgrounds-dimensions").text(),cdn:c.hasClass("nicebackgrounds-thumb-cdn")?1:0},g=a('<span class="nicebackgrounds-overlay nicebackgrounds-overlay-wait"><span class="dashicons dashicons-update"></span><span class="message"></span></span>');g.hide(0),c.append(g),g.fadeIn(150),a.post(nicebackgrounds_data.ajax_url,f,function(b){if(null!==b&&b.message&&g.find(".message").text(b.message),null!==b&&b.success){g.removeClass("nicebackgrounds-overlay-wait").addClass("nicebackgrounds-overlay-success"),g.find(".dashicons").removeClass("dashicons-update").addClass("dashicons-thumbs-up");var h=a(b.result);h.hide(0),d.find(".nicebackgrounds-collection-display").append(h);var i=new Image;i.src=h.find("img").attr("src"),i.onerror=function(){1===f.cdn?h.find("img").attr("src",f.file):h.find("img").attr("src",h.find(".nicebackgrounds-modal").attr("href"))},h.show(150),c.delay(2e3).fadeOut(300,function(){c.remove(),e(c,d)})}else g.removeClass("nicebackgrounds-overlay-wait").addClass("nicebackgrounds-overlay-error"),g.find(".dashicons").removeClass("dashicons-update").addClass("dashicons-thumbs-down"),g.delay(5e3).fadeOut(300,function(){g.remove(),c.removeClass("nicebackgrounds-choosing")})},"json").fail(function(){g.removeClass("nicebackgrounds-overlay-wait").addClass("nicebackgrounds-overlay-failure"),g.find(".dashicons").removeClass("dashicons-update").addClass("dashicons-no"),g.delay(5e3).fadeOut(300,function(){g.remove(),c.removeClass("nicebackgrounds-choosing")})})}})}),jQuery(document).ready(function(a){"use strict";a(".nicebackgrounds-upload").each(function(){var b=a(this),c=a(this).find('input[type="file"]'),d=b.closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div"),e=!1;c.on("change",function(f){if(f.preventDefault(),b.hasClass("is-wait"))return!1;b.addClass("is-wait").removeClass("is-error").removeClass("is-failure");var g=new FormData;if(e)a.each(e,function(a,b){g.append("file"+a,b)}),e=!1;else for(var h=0;h<c[0].files.length;h++)g.append("file"+h,c[0].files[h]);g.append("action","nicebackgrounds"),g.append("func","save_upload"),g.append("set_id",d.data("tab-key")),g.append("nonce",b.data("save-upload")),a.ajax({type:"POST",url:nicebackgrounds_data.ajax_url,data:g,contentType:!1,processData:!1,dataType:"json",success:function(c){var e="error",f="???";if(null!==c&&c.success&&(e="success",null!==c.message)){f=c.message;var g=a(c.result);g.hide(0),d.find(".nicebackgrounds-collection-display").append(g),g.show(150)}b.addClass("is-"+e);var h=a('<span class="message">'+f+"</span>");b.find(".add-status-"+e).append(h),setTimeout(function(){h.remove(),b.removeClass("is-"+e)},3e3)}}).fail(function(){b.addClass("is-failure"),setTimeout(function(){b.removeClass("is-failure")},3e3)}).always(function(){b.removeClass("is-wait")})}),c.siblings("button").click(function(){c.click()});var f=document.createElement("div");("draggable"in f||"ondragstart"in f&&"ondrop"in f)&&b.addClass("has-advanced-upload").on("drag dragstart dragend dragover dragenter dragleave drop",function(a){a.preventDefault(),a.stopPropagation()}).on("dragover dragenter",function(){a(this).addClass("is-dragover").addClass("is-draggingover"),(null!==a(this).data("timeout")||void 0!==a(this).data("timeout"))&&(clearTimeout(a(this).data("timeout")),a(this).removeData("timeout"))}).on("dragleave dragend drop",function(){a(this).removeClass("is-draggingover");var b=setTimeout(function(){a(this).removeClass("is-dragover")},300);a(this).data("timeout",b)}).on("drop",function(b){a(this).removeClass("is-dragover"),e=b.originalEvent.dataTransfer.files,c.trigger("change")})})}),jQuery(document).ready(function(a){"use strict";var b=function(b,c){var d={action:"nicebackgrounds",func:"save_url",set_id:b.data("tab-key"),nonce:b.find(".nicebackgrounds-url").data("save-url"),url:c};b.find(".nicebackgrounds-url .add-status").hide(150),b.find(".nicebackgrounds-url .add-status-wait").show(150),a.post(nicebackgrounds_data.ajax_url,d,function(c){var d="error";if(null!==c&&c.success){d="success",b.find(".nicebackgrounds-input-url input").val("");var e=a(c.result);e.hide(0),b.find(".nicebackgrounds-collection-display").append(e),e.show(150)}if(null!==c&&c.message){var f=a('<div class="nicebackgrounds-url-message">'+c.message+"</div>");b.find(".nicebackgrounds-url .add-status").hide(150),b.find(".nicebackgrounds-url .add-status-"+d).append(f).show(150).delay(5e3).hide(150,function(){f.remove()})}},"json").fail(function(){b.find(".nicebackgrounds-url .add-status").hide(150),b.find(".nicebackgrounds-url .add-status-failure").show(150)})};a(".nicebackgrounds-url button").click(function(c){c.preventDefault(),c.stopImmediatePropagation();var d=a(this).closest(".nicebackgrounds-url").find(".nicebackgrounds-input-url input").val(),e=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div");b(e,d)}),a(".nicebackgrounds-input-url input").keyup(function(c){if(13===c.keyCode){c.preventDefault(),c.stopImmediatePropagation();var d=a(this).closest(".nicebackgrounds-tab-group-set > .nicebackgrounds-tab-panels > div");b(d,a(this).val())}})});